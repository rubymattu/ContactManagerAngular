<div id="links" class="btn-group mt-4" role="group" aria-label="Navigation Links">
  <a 
    class="btn btn-outline-primary" 
    routerLink="/contacts" >
    Contact List
  </a>

  <a 
    class="btn btn-outline-primary" 
    routerLink="/add" 
    [routerLinkActive]="'active'" 
    [routerLinkActiveOptions]="{exact: true}">
    Add Contact
  </a>

  <a 
    class="btn btn-outline-primary" 
    routerLink="/about" >
    About Us
  </a>
</div>

<div id="theForm">
  <div class="toolbar">
    <h2>{{ userName }}'s Add Contact</h2>
    <button (click)="authService.logout()" class="btn btn-sm btn-danger">Logout</button>
  </div>
  <form #f="ngForm" name="contactForm" (submit)="addContact(f)">
    
    <div class="form-group">
      <label>First Name: </label>
      <input type="text"
        class="form-control"
        name="firstName"
        [(ngModel)]="contact.firstName"
        #firstName="ngModel"
        required
        maxlength="50">
      <div *ngIf="firstName.errors?.['required'] && firstName.touched" class="text-danger">
        The first name is required.
      </div>
      <div *ngIf="firstName.errors?.['maxlength'] && firstName.touched" class="text-danger">
        Max 50 characters allowed.
      </div>
    </div>

    <div class="form-group">
      <label>Last Name: </label>
      <input type="text"
        class="form-control"
        name="lastName"
        [(ngModel)]="contact.lastName"
        #lastName="ngModel"
        required
        maxlength="50">
      <div *ngIf="lastName.errors?.['required'] && lastName.touched" class="text-danger">
        The last name is required.
      </div>
      <div *ngIf="lastName.errors?.['maxlength'] && lastName.touched" class="text-danger">
        Max 50 characters allowed.
      </div>
    </div>

    <div class="form-group">
      <label>Email Address</label>
      <input
        type="email"
        name="emailAddress"
        class="form-control"
        [(ngModel)]="contact.emailAddress"
        #email="ngModel"
        required
        maxlength="100"
        pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
      />
      <div *ngIf="email.errors?.['required'] && email.touched" class="text-danger">
        Email is required.
      </div>
      <div *ngIf="email.errors?.['maxlength'] && email.touched" class="text-danger">
        Max 100 characters allowed.
      </div>
      <div *ngIf="email.errors?.['pattern'] && email.touched" class="text-danger">
        Enter a valid email address.
      </div>
    </div>

    <div class="form-group">
      <label>Phone Number</label>
      <input 
        type="tel" 
        name="phone" 
        [(ngModel)]="contact.phoneNumber"
        #phone="ngModel"
        class="form-control" 
        required 
        maxlength="14" 
        pattern="^(\(\d{3}\)\s|\d{3}-)\d{3}-\d{4}$" 
      />
      <div *ngIf="phone.errors?.['required'] && phone.touched" class="text-danger">
        Phone number is required.
      </div>
      <div *ngIf="phone.errors?.['maxlength'] && phone.touched" class="text-danger">
        Max 14 characters allowed.
      </div>
      <div *ngIf="phone.errors?.['pattern'] && phone.touched" class="text-danger">
        Please enter a valid phone number in the format (123) 456-7890 or 123-456-7890.
      </div>
    </div>

    <div class="form-group">
      <label>Status: </label>
      &nbsp;
      <label class="radio-inline">
        <input type="radio"          
          name="status"
          value="member"
          [(ngModel)]="contact.status"
          required>
        &nbsp;Member
      </label>
      &nbsp;
      <label class="radio-inline">
        <input type="radio"          
          name="status"
          value="nonmember"
          [(ngModel)]="contact.status"
          required>
        &nbsp;Non-Member
      </label>
      <div *ngIf="f.submitted && !contact.status" class="text-danger">
        Status is required.
      </div>  
    </div>

    <div class="form-group">
      <label>Birth Date: </label>
      <input type="date"
        class="form-control"
        name="dob"
        [(ngModel)]="contact.dob"
        #dob="ngModel"
        [max]="maxDate"
        required>
      <div *ngIf="dob.errors?.['required'] && dob.touched" class="text-danger">
        The date of birth is required.
      </div>
    </div>

    <div class="form-group">
      <label for="typeID">Contact Type</label>
      <select id="typeID" name="typeID" class="form-control" [(ngModel)]="contact.typeID" required>
        <option value="" disabled>Select a contact type</option>
        <option *ngFor="let t of types" [value]="t.typeID">{{ t.typeName }}</option>
      </select>
      <div *ngIf="f.submitted && !contact.typeID" class="text-danger">
        Contact type is required.
      </div>
    </div>

    <div class="form-group">
      <label>Upload Image: </label>
      <input
        type="file"
        accept="image/*"
        class="form-control"
        (change)="onFileSelected($event)"
      />
    </div>

    <button 
      type="submit" 
      class="btn btn-primary btn-sm" 
      [disabled]="f.invalid">Add Contact</button>

    <button 
      type="button" 
      class="btn btn-secondary btn-sm" 
      routerLink="/contacts">Cancel</button>

  </form>
</div>
